/* ðŸ“– Bindery v2.2.9 */var Bindery=function(){'use strict';function e(e,r){return R(".error",[R(".error-title",e),R(".error-text",r),R(".error-footer",`Bindery ${t}`)])}const t="v2.2.9",r=e=>`${"\uD83D\uDCD6-"}${e}`,n=e=>`.${r(e)}`,o=e=>"."===e[0]?n(e.substr(1)):r(e),a=1,i=2,d=3,l=4,s=5,p=6,g=7;var u=Object.freeze({AUTO:a,AUTO_BLEED:i,AUTO_MARKS:d,LETTER_PORTRAIT:l,LETTER_LANDSCAPE:s,A4_PORTRAIT:p,A4_LANDSCAPE:g});const m=2,f=3;var b=Object.freeze({FLIPBOOK:1,PREVIEW:m,PRINT:f});const w=1,v=2,y=3;var k=Object.freeze({PAGES:1,BOOKLET:y,SPREADS:v});const x=2,P=3,E=4;var C=Object.freeze({NONE:1,CROP:x,BLEED:P,BOTH:E});const S={showBleed:"show-bleed",showCrop:"show-crop",showBleedMarks:"show-bleed-marks",isViewing:"viewing",viewPreview:"view-preview",viewPrint:"view-print",viewFlip:"view-flip",inProgress:"in-progress",leftPage:"left",rightPage:"right",isOverflowing:"is-overflowing",printSheet:"print-sheet",sheetSpread:"print-sheet-spread",sheetLeft:"print-sheet-left",sheetRight:"print-sheet-right",toNext:"continues",fromPrev:"continuation"};Object.keys(S).forEach(e=>{const t=S[e];S[e]=o(t)}),S.allModes=[S.viewPreview,S.viewPrint,S.viewFlip],S[m]=S.viewPreview,S[f]=S.viewPrint,S[1]=S.viewFlip;const L=window.document,R=(e,t=[])=>{const r=L.createElement("div");return r.className=e.split(".").filter(e=>""!==e).map(o).join(" "),"string"==typeof t?r.textContent=t:Array.isArray(t)&&t.forEach(e=>r.appendChild(e)),r},z=(e,t)=>{if(e.parentNode)return t();let r=document.querySelector(o(".measure-area"));r||(r=document.body.appendChild(R("measure-area"))),r.firstElementChild!==e&&(r.innerHTML="",r.appendChild(e));const n=t();return n},A=window.document,O=e=>{const t=A.createElement("style");return t.id=e,A.head.appendChild(t),t},N=e=>A.querySelector(`#${e}`)||O(e),B=(e,t)=>{const r=A.createElement("div");return r.innerHTML=e,r.querySelector(t)},M=o,c=/^([+-]?[0-9]+(.?[0-9]+)?)(px|in|cm|mm|pt|pc)$/,F=e=>c.test(e),I=e=>{if(!F(e))throw Error(`Cannot parse css length from "${e}"`);const t=e.match(c);return{val:+t[1],unit:t[3]}};var H={bleed:"12pt",size:{width:"4in",height:"6in"},margin:{inner:"24pt",outer:"24pt",bottom:"40pt",top:"48pt"}};const V=Object.freeze({width:"8.5in",height:"11in"}),D=Object.freeze({width:"210mm",height:"297mm"}),j=!!window.chrome;class U{constructor(e={},t={}){this.size=e.size||H.size,this.margin=e.margin||H.margin,this.markLength="12pt",this.paper=j?t.paper||a:d,this.bleed=t.bleed||H.bleed,this.printTwoUp=t.layout&&t.layout!==w}get displaySize(){const e=this.printTwoUp?this.spreadSize.width:this.size.width,t=this.size.height,r=this.bleed;return{width:e,height:t,bleed:r}}get sheetSize(){const e=this.printTwoUp?this.spreadSize.width:this.size.width,t=this.size.height,r=`2 * ${this.bleed}`,n=`${r} + 2 * ${this.markLength}`,o=`${this.bleed} + ${this.markLength}`;switch(this.paper){case a:return{width:e,height:t};case i:return{width:`calc(${e} + ${this.printTwoUp?r:this.bleed})`,height:`calc(${t} + ${r})`};case d:return{width:`calc(${e} + ${this.printTwoUp?n:o})`,height:`calc(${t} + ${n})`};case s:return{width:V.height,height:V.width};case l:return V;case p:return D;case g:return{width:D.height,height:D.width};default:}return{width:e,height:t}}get spreadSize(){const e=I(this.size.width);return{height:this.size.height,width:`${2*e.val}${e.unit}`}}updateStyleVars(){const e=this.size,t=this.sheetSize,r={"spread-width":this.spreadSize.width,"page-width":e.width,"page-height":e.height,"sheet-width":t.width,"sheet-height":t.height,"margin-inner":this.margin.inner,"margin-outer":this.margin.outer,"margin-top":this.margin.top,"margin-bottom":this.margin.bottom,bleed:this.bleed,"mark-length":this.markLength},n=Object.keys(r).map(e=>`--bindery-${e}: ${r[e]};`).join(""),o=`@page { size: ${t.width} ${t.height}; }`;N("binderyPage").innerHTML=`${`:root { ${n} }`} ${o}`}}class _{constructor(e){this.name=e.name?e.name:"Unnamed Bindery Rule",this.selector="",Object.keys(e).forEach(t=>{this[t]=e[t]})}}const q=(e,t)=>{if(!t)throw Error("Valid options not specified");return Object.keys(e).forEach(r=>{if(!t[r]){const e=t.name?`'${t.name}'`:"This option";throw Error(`Unknown option in ${e}: '${r}'`)}const n=e[r],o=t[r];if(!o.check(n)){const e=t.name?`${t.name}.${r}`:r;throw Error(`Invalid value for '${e}': ${JSON.stringify(n)} is not a ${o.name}.`)}}),!0},W=e=>"object"==typeof e,K=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Y=(e,t)=>{const r=Object.keys(t).filter(e=>"name"!==e);return!r.some(t=>!K(e,t))},G=e=>t=>W(t)&&q(t,e),X=e=>t=>W(t)&&Y(t,e)&&q(t,e),Q=e=>t=>e.includes(t),Z={any:{name:"any",check:()=>!0},enum(...e){return{name:`(${e.map(e=>`"${e}"`).join(" | ")})`,check:Q(e)}},shapeExact:e=>({name:`exactly ({${Object.keys(e).join(", ")}})`,check:X(e)}),shape:e=>({name:`shape ({${Object.keys(e).join(", ")}})`,check:G(e)}),string:{name:"string",check:e=>"string"==typeof e},length:{name:"length (string with absolute units)",check:F},number:{name:"number",check:e=>"number"==typeof e},bool:{name:"bool",check:e=>"boolean"==typeof e},func:{name:"func",check:e=>"function"==typeof e},obj:{name:"object",check:W},array:{name:"array",check:e=>Array.isArray(e)}};Z.margin={name:"margin ({ top, inner, outer, bottom })",check:X({name:"margin",top:Z.length,inner:Z.length,outer:Z.length,bottom:Z.length})},Z.size={name:"size ({ width, height })",check:X({name:"size",width:Z.length,height:Z.length})};class T extends _{constructor(e){super(e),this.selector="*",this.counterValue=0,q(e,{name:"Counter",replaceEl:Z.string,resetEl:Z.string,incrementEl:Z.string,replace:Z.func})}setup(){this.counterValue=0}beforeAdd(e){return e.matches(this.incrementEl)&&(this.counterValue+=1),e.matches(this.resetEl)&&(this.counterValue=0),e.matches(this.replaceEl)?this.createReplacement(e):e}createReplacement(e){return this.replace(e,this.counterValue)}replace(e,t){return e.textContent=t,e}}class $ extends _{constructor(e){super(e),this.name="Out of Flow"}beforeAdd(e){return e.setAttribute("data-ignore-overflow",!0),e}afterAdd(e,t,r,n){return this.createOutOfFlowPages(e,t,n),("same"!==this.continue||t.currentPage.hasOutOfFlowContent)&&(r(!0),("left"===this.continue||"right"===this.continue)&&t.currentPage.setPreference(this.continue)),e}}class J extends ${constructor(e){e.continue=e.continue||"same",e.rotate=e.rotate||"none",super(e),q(e,{name:"FullBleedSpread",selector:Z.string,continue:Z.enum("next","same","left","right"),rotate:Z.enum("none","clockwise","counterclockwise")})}createOutOfFlowPages(e,t,r){e.parentNode.removeChild(e);let n;t.currentPage.isEmpty?n=t.currentPage:(n=r(),t.addPage(n));const o=r();t.addPage(o),"none"!==this.rotate&&[n,o].forEach(e=>{const t=R(`.rotate-container.spread-size-rotated.rotate-spread-${this.rotate}`);t.appendChild(e.background),e.element.appendChild(t)}),n.background.appendChild(e),n.element.classList.add(M("spread")),n.setPreference("left"),n.isOutOfFlow="same"===this.continue,n.avoidReorder=!0,n.hasOutOfFlowContent=!0,o.background.appendChild(e.cloneNode(!0)),o.element.classList.add(M("spread")),o.setPreference("right"),o.isOutOfFlow="same"===this.continue,o.avoidReorder=!0,o.hasOutOfFlowContent=!0}}class ee extends ${constructor(e){e.continue=e.continue||"same",e.rotate=e.rotate||"none",super(e),q(e,{name:"FullBleedPage",selector:Z.string,continue:Z.enum("next","same","left","right"),rotate:Z.enum("none","inward","outward","clockwise","counterclockwise")})}createOutOfFlowPages(e,t,r){e.parentNode.removeChild(e);let n;if(t.currentPage.isEmpty?n=t.currentPage:(n=r(),t.addPage(n)),"none"!==this.rotate){const e=R(`.rotate-container.page-size-rotated.rotate-${this.rotate}`);e.appendChild(n.background),n.element.appendChild(e)}n.background.appendChild(e),n.hasOutOfFlowContent=!0}}class te extends _{constructor(e){super(e),this.name="Replace"}afterAdd(e,t,r,n,o){const a=e.parentNode;if(!a)throw console.error(e),Error(`Bindery.Replace({ selector: '${this.selector}' }).afterAdd called on element that hasn't been added.`);const i=e.cloneNode(!0),d=this.createReplacement(t,i);return a.replaceChild(d,e),t.currentPage.hasOverflowed()?(a.replaceChild(e,d),o(e)):d}createReplacement(e,t){return this.replace(t)}replace(e){return e.insertAdjacentHTML("beforeEnd","<sup class=\"bindery-sup\">Default Replacement</sup>"),e}}class re extends te{constructor(e){super(e),q(e,{name:"Footnote",selector:Z.string,replace:Z.func,render:Z.func})}afterAdd(e,t,r,n,o){const a=t.currentPage.footer.children.length+1,i=R(".footnote"),d=this.render(e,a);return d instanceof HTMLElement?i.appendChild(d):i.innerHTML=d,t.currentPage.footer.appendChild(i),super.afterAdd(e,t,r,n,e=>(t.currentPage.footer.removeChild(i),o(e)))}createReplacement(e,t){const r=e.currentPage.footer.children.length;return this.replace(t,r)}replace(e,t){return e.insertAdjacentHTML("beforeEnd",`<sup class="bindery-sup">${t}</sup>`),e}render(e,t){return`<sup>${t}</sup> Default footnote (<a href='/bindery/docs/#footnote'>Learn how to change it</a>)`}}const ne=(e,t)=>e.filter(e=>e.number&&t(e.element)).map(e=>e.number),oe=e=>{let t="",r=e[0],n=!1;const o=e=>{t+=`${e}`},a=()=>{n=!0},i=e=>{n=!1,t+=`â€“${e}`},d=e=>{t+=`, ${e}`},l=(e,t)=>{i(e),d(t)},s=(e,t)=>{t?i(e):n&&!t?l(r,e):d(e)};return e.forEach((t,p)=>{const i=p===e.length-1,c=t===r+1;0===p?o(t):i?s(t,c):c?a():n&&!c?l(r,t):d(t),r=t}),t},ae=(e,t)=>{if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let n=0;n<r;n+=1)if(e[n]!==t[n])return!1;return!0},ie=e=>{let t,r=!1;const n=o=>r?void(t=o):void(r=!0,o(),setTimeout(()=>{if(r=!1,t){const e=t;t=null,n(e)}},e));return n},de=e=>2<e.length&&"#"===e[0]&&/^\d+$/.test(e[1]),le=e=>de(e)?`[id="${e.replace("#","")}"]`:e;class se extends te{constructor(e){super(e),q(e,{name:"PageReference",selector:Z.string,replace:Z.func,createTest:Z.func}),this.references=[];const t=ie(10);this.throttledUpdate=e=>{t(()=>this.updatePageReferences(e.pages))}}eachPage(e,t){this.throttledUpdate(t)}afterAdd(e,t){const r=this.createTest(e);if(!r)return e;const n=this.createReference(t,r,e);return n.element}createReference(e,t,r){const n={test:t,template:r,element:r,value:null};n.render=e=>this.render(n,e),this.references.push(n);const o=ne(e.pages,t);return n.render(o),n}render(e,t){if(!t||ae(e.value,t))return;if(!Array.isArray(t))throw Error("Page search returned unexpected result");const r=0<t.length,n=r?oe(t):"\u2327",o=e.template.cloneNode(!0),a=this.replace(o,n);r||a.classList.add(M("placeholder-num")),e.element.parentNode.replaceChild(a,e.element),e.element=a,e.value=t}createTest(e){const t=e.getAttribute("href");if(!t)return null;const r=le(t);return e=>e.querySelector(r)}updatePageReferences(e){const t=this.references.map(t=>({ref:t,data:ne(e,t.test)}));t.forEach(({ref:e,data:t})=>this.render(e,t))}replace(e,t){return e.insertAdjacentHTML("beforeend",`, <span>${t}</span>`),e}}class pe extends _{constructor(e){e.position=e.position||"before",e.continue=e.continue||"next",super(e),q(e,{name:"PageBreak",selector:Z.string,continue:Z.enum("next","left","right"),position:Z.enum("before","after","both","avoid")})}get avoidSplit(){return"avoid"===this.position}beforeAdd(e,t,r){return("before"===this.position||"both"===this.position)&&(!t.currentPage.isEmpty&&r(),"next"!==this.continue&&t.currentPage.setPreference(this.continue)),e}afterAdd(e,t,r){if("after"===this.position||"both"===this.position){const e=r(!0);"next"!==this.continue&&e.setPreference(this.continue)}return e}}class ce extends _{constructor(e={}){super(e),q(e,{name:"RunningHeader",render:Z.func})}eachPage(e){if(!e.runningHeader){const t=R(".running-header");e.element.appendChild(t),e.runningHeader=t}e.runningHeader.innerHTML=this.render(e)}render(e){return e.number}}class ge extends _{constructor(e){super(e),q(e,{name:"Split",selector:Z.string,toNext:Z.string,fromPrevious:Z.string,didSplit:Z.func})}didSplit(e,t){this.toNext&&e.classList.add(this.toNext),this.fromPrevious&&t.classList.add(this.fromPrevious)}}var he={Rule:_,Split(e){return new ge(e)},Counter(e){return new T(e)},FullBleedPage(e){return new ee(e)},Footnote(e){return new re(e)},RunningHeader(e){return new ce(e)},Replace(e){return new te(e)},FullBleedSpread(e){return new J(e)},PageBreak(e){return new pe(e)},PageReference(e){return new se(e)},createRule(e){return new _(e)}};const{PageBreak:ue,PageReference:me,Footnote:fe,FullBleedPage:be,FullBleedSpread:we}=he,ve=(e,t)=>(e.textContent=`${t}`,e);var ye=[ue({selector:"[book-page-break=\"both\"]",position:"both"}),ue({selector:"[book-page-break=\"avoid\"]",position:"avoid"}),ue({selector:"[book-page-break=\"after\"][book-page-continue=\"right\"]",position:"after",continue:"right"}),ue({selector:"[book-page-break=\"after\"][book-page-continue=\"left\"]",position:"after",continue:"left"}),ue({selector:"[book-page-break=\"after\"][book-page-continue=\"next\"]",position:"after",continue:"next"}),ue({selector:"[book-page-break=\"before\"][book-page-continue=\"right\"]",position:"before",continue:"right"}),ue({selector:"[book-page-break=\"before\"][book-page-continue=\"left\"]",position:"before",continue:"left"}),ue({selector:"[book-page-break=\"before\"][book-page-continue=\"next\"]",position:"before",continue:"next"}),be({selector:"[book-full-bleed=\"page\"]"}),we({selector:"[book-full-bleed=\"spread\"]"}),fe({selector:"[book-footnote-text]",render:(e,t)=>{const r=e.getAttribute("book-footnote-text");return`<i>${t}</i>${r}`}}),me({selector:"[book-pages-with-text]",replace:ve,createTest:e=>{const t=e.getAttribute("book-pages-with-text").toLowerCase().trim();return e=>e.textContent.toLowerCase().includes(t)}}),me({selector:"[book-pages-with-selector]",replace:ve,createTest:e=>{const t=e.getAttribute("book-pages-with-selector").trim();return e=>e.querySelector(t)}}),me({selector:"[book-pages-with]",replace:ve,createTest:e=>{const t=e.textContent.toLowerCase().trim();return e=>{const r=e.textContent.toLowerCase();return r.includes(t)}}})];const ke=e=>{const t=document.createElement("div");return t.classList.add(e),t};class xe{constructor(e){this.element=e,this.content=ke("region-content"),this.content.style.padding="0.1px",this.content.style.position="relative",this.element.appendChild(this.content),this.path=[]}setPath(e){this.path=e,0<e.length&&this.content.appendChild(e[0])}get currentElement(){const e=this.path.length;return 0<e?this.path[e-1]:this.content}get isEmpty(){return""===this.content.textContent.trim()&&1>this.content.offsetHeight}get isReasonableSize(){const e=this.element.getBoundingClientRect();return 100<e.height&&100<e.width}overflowAmount(){const e=this.content.offsetHeight,t=this.element.offsetHeight;if(0===t)throw Error("Regionizer: Trying to flow into an element with zero height.");return e-t}hasOverflowed(){return-5<this.overflowAmount()}}const Pe=e=>e.nodeType===Node.TEXT_NODE,Ee=e=>e.nodeType===Node.ELEMENT_NODE,Ce=e=>"SCRIPT"===e.tagName,Se=e=>"IMG"===e.tagName,Le=e=>Se(e)&&!e.naturalWidth,Te=e=>Ee(e)&&!Ce(e),Re=()=>new Promise(e=>{requestAnimationFrame(r=>e(r))});let ze=0;const Ae=()=>{const e=performance.now()-ze;return e>30},Oe=async()=>{Ae()&&(ze=await Re())},Ne=e=>!!e.hasAttribute("data-ignore-overflow")||!!e.parentElement&&Ne(e.parentElement),Be=document.createTextNode.bind(document),Me=async(e,t,r)=>{t.appendChild(e);const n=!r();return n||t.removeChild(e),await Oe(),n},Fe=async(e,t,r)=>{const n=e.nodeValue;if(t.appendChild(e),!r()||Ne(t))return!0;let o=0;for(e.nodeValue=n.substr(0,o);!r()&&o<n.length;){for(o+=1;o<n.length&&" "!==n.charAt(o);)o+=1;o<n.length&&(e.nodeValue=n.substr(0,o),await Oe())}for(" "===n.charAt(o)&&(o-=1);" "!==n.charAt(o)&&0<o;)o-=1;if(1>o)return e.nodeValue=n,t.removeChild(e),!1;const a=n.substr(0,o),i=n.substr(o);e.nodeValue=a;const d=Be(i);return d},Ie=async(e,t,r,n)=>{const o=await Fe(e,t,n);if(Pe(o)){const e=r();return Ie(o,e,r,n)}return o},He=(e,t,r)=>{if(1>=e.path.length)throw Error("Regionize: Attempting to move the top-level element");const n=e.path.length,o=e.path.pop();let a=o;const i=[];for(;1<e.path.length&&!r(e.currentElement);)a=e.path.pop(),i.unshift(a);a.setAttribute("data-bindery-did-move",!0);const d=a.parentNode;d.removeChild(a),1<e.path.length&&""===e.currentElement.textContent.trim()&&(d.appendChild(a),a=e.path.pop(),i.unshift(a),a.parentNode.removeChild(a));let l;if(e.isEmpty?l=e:(e.hasOverflowed()&&(e.suppressErrors=!0),l=t()),l.currentElement.appendChild(a),i.forEach(e=>l.path.push(e)),l.path.push(o),n!==l.path.length)throw Error("Regionize: Restored path depth does not match original path depth")},Ve=(e,t)=>{const r=[],n=e=>{const r=e.cloneNode(!0);return t(e,r),r};for(let o=e.length-1;0<=o;o-=1){const a=e[o],i=a.cloneNode(!1),d=e[o+1];i.innerHTML="",t(a,i,d,n),o<e.length-1&&i.appendChild(r[o+1]),r[o]=i}return r},De=()=>new Promise(e=>{setTimeout(()=>{e()},10)}),je=async e=>{const t=performance.now();let r=!1;for(e.addEventListener("error",()=>{r=!0}),e.src=e.src;!e.naturalWidth&&!r;)await De();return performance.now()-t},Ue=(e,t,r)=>{let n=1;e.hasAttribute("start")&&(n=parseInt(e.getAttribute("start"),10)),r&&"LI"===r.tagName&&(n-=1);const o=e.children.length,a=n+o;t.setAttribute("start",a)},_e=(e,t,r,n)=>{const o=[...e.children],a=o.indexOf(r);for(let d=0;d<a;d+=1){const e=n(o[d]);t.appendChild(e)}},qe=()=>{},We=()=>!0,Ke=()=>!1,Ye=async e=>{const t=e.content,r=e.createRegion;if(!t)throw Error("content not specified");if(!r)throw Error("createRegion not specified");const n=e.applySplit||qe,o=e.canSplit||We,a=e.beforeAdd||qe,i=e.afterAdd||qe,d=e.didWaitFor||qe,l=e.shouldTraverse||Ke;let s=r();const p=()=>s.hasOverflowed(),c=()=>o(s.currentElement),g=()=>Ne(s.currentElement),h=(e,t,r,o)=>{"OL"===e.tagName&&Ue(e,t,r),"TR"===e.tagName&&_e(e,t,r,o),n(e,t,r,o)},u=()=>{const e=s;s=r();const t=Ve(e.path,h);return s.setPath(t),s},m=()=>(u(),s.currentElement),f=(e,t)=>{t.appendChild(e),!g()&&c()&&(s.suppressErrors=!0,u())},b=async e=>{const t=s.currentElement;let r=await Ie(e,t,m,p);!r&&1<s.path.length&&(He(s,u,o),r=await Ie(e,t,m,p)),r||f(e,s.currentElement)},w=async e=>{let t=await Me(e,s.currentElement,p);t||g()||(He(s,u,o),t=await Me(e,s.currentElement,p)),t||f(e,s.currentElement)},v=e=>{const t=e.querySelector("img");return!t&&!l(e)};let y;const k=async e=>{if(s.currentElement.appendChild(e),s.path.push(e),v(e)&&!p())return s.path.pop();const t=[...e.childNodes];e.innerHTML="",p()&&!g()&&c()&&He(s,u,o);const r=o(e)&&!Ne(e);for(const n of t)Pe(n)?await(r?b:w)(n):Te(n)&&(await y(n));return s.path.pop()};return y=async e=>{if(Le(e)){const t=await je(e);d(t)}a(e,u);const t=await k(e);i(t,u)},y(t)};class Ge{constructor(){this.flow=new xe(R("flow-box")),this.footer=R("footer"),this.background=R("page-background"),this.element=R("page",[this.background,this.flow.element,this.footer])}static isSizeValid(){const e=new Ge;return z(e.element,()=>e.flow.isReasonableSize)}setLeftRight(e){this.side=e,this.element.classList.toggle(S.leftPage,this.isLeft),this.element.classList.toggle(S.rightPage,!this.isLeft)}get isLeft(){return"left"===this.side}get isRight(){return"right"===this.side}setPreference(e){const t="left"===e;this.alwaysLeft=t,this.alwaysRight=!t}get suppressErrors(){return this.suppress||!1}set suppressErrors(e){this.suppress=e,this.element.classList.toggle(S.isOverflowing,e)}get isEmpty(){return!this.hasOutOfFlowContent&&this.flow.isEmpty}validate(){if(this.hasOverflowed()){const e=this.currentElement;e?(console.warn("Bindery: Content overflows, probably due to a style set on:",e),e.parentNode.removeChild(e)):console.warn("Bindery: Content overflows.")}}validateEnd(e){if(this.hasOverflowed()&&(console.warn(`Bindery: Page ~${this.number} is overflowing`,this.element),!this.suppressErrors&&!this.flow.suppressErrors&&!e))throw Error("Bindery: Moved to new page when last one is still overflowing")}hasOverflowed(){return z(this.element,()=>this.flow.hasOverflowed())}}const Xe=(e,t)=>{for(let r=t;r<e.length;r+=1){const t=e[r];if(!t.isOutOfFlow&&!t.avoidReorder)return r}return null},Qe=(e,t)=>{const r=e.slice();for(let n=0;n<r.length;n+=1){const e=r[n],o=0!=n%2;if(o&&e.alwaysRight||!o&&e.alwaysLeft)if(e.isOutOfFlow){const e=Xe(r,n+1);if(!e)break;const t=r[e];r.splice(e,1),r.splice(n,0,t)}else r.splice(n,0,t())}return r};class Ze{constructor(){this.rawPages=[],this.orderedPages=[]}addPage(e){this.rawPages.push(e),this.updatePageOrder()}get pageCount(){return this.orderedPages.length}get pages(){return this.orderedPages}updatePageOrder(){this.orderedPages=Qe(this.rawPages,()=>new Ge)}validate(){if(this.pageCount>2e3)throw Error("Bindery: Maximum page count exceeded. Suspected runaway layout.")}}const $e=(e,t)=>{e.forEach((e,r)=>{e.number=t+r+1,e.setLeftRight(0==r%2?"right":"left")});const r={h1:"",h2:"",h3:"",h4:"",h5:"",h6:""};e.forEach(e=>{e.heading={},Object.keys(r).forEach((t,n)=>{const o=e.element.querySelector(t);o&&(r[t]=o.textContent,Object.keys(r).forEach((e,t)=>{t>n&&(r[e]="")})),""!==r[t]&&(e.heading[t]=r[t])})})},Je=e=>e instanceof J,et=e=>e instanceof ee,tt=e=>e instanceof pe,rt=e=>Je(e)||et(e)||tt(e),nt=e=>{const t=e.filter(rt),r=e.filter(e=>!t.includes(e)),n=t.find(Je),o=t.find(et);return n?r.push(n):o?r.push(o):r.push(...t),r},ot=(e,t,r)=>{let n=e;const o=e.parentNode;o.removeChild(n);let a;t.currentPage.hasOverflowed()&&(o.appendChild(e),n=o,n.parentNode.removeChild(n),a=t.currentPage.flow.path.pop(),t.currentPage.hasOverflowed()&&console.error("Trying again didnt fix it"));const i=r();i.currentElement.appendChild(n),a&&i.path.push(a)},at=(e,t)=>{console.warn(`Couldn't apply ${e.name}, caused overflows twice when adding: `,t)};class it{constructor(e){const t=e.find(e=>e.pageNumberOffset);this.pageNumberOffset=t?t.pageNumberOffset:0,this.pageRules=e.filter(e=>e.eachPage),this.beforeAddRules=e.filter(e=>e.selector&&e.beforeAdd),this.afterAddRules=e.filter(e=>e.selector&&e.afterAdd),this.selectorsNotToSplit=e.filter(e=>e.avoidSplit).map(e=>e.selector),this.didSplitRules=e.filter(e=>e.selector&&e.didSplit),e.filter(e=>e.setup).forEach(e=>e.setup()),this.applySplitRules=this.applySplitRules.bind(this);const r=e.map(e=>e.selector).filter(e=>!!e).join(", ");if(r){this.shouldTraverse=(e=>e.querySelector(r)).bind(this)}else this.shouldTraverse=()=>!1}applySplitRules(e,t,r,n){e.classList.add(S.toNext),t.classList.add(S.fromPrev),this.didSplitRules.filter(t=>e.matches(t.selector)).forEach(o=>{o.didSplit(e,t,r,n)})}applyPageDoneRules(e,t){this.pageRules.forEach(r=>r.eachPage(e,t))}finishEveryPage(e){this.pageRules.forEach(t=>e.pages.forEach(r=>t.eachPage(r,e)))}applyBeforeAddRules(e,t,r,n){let o=e;const a=this.beforeAddRules.filter(e=>o.matches(e.selector));return a.forEach(e=>{o=e.beforeAdd(o,t,r,n)}),o}applyAfterAddRules(e,t,r,n){let o=e;const a=e=>ot(e,t,r),i=this.afterAddRules.filter(e=>o.matches(e.selector)),d=nt(i);return d.forEach(e=>{o=e.afterAdd(o,t,r,n,o=>(a(o),e.afterAdd(o,t,r,n,()=>at(e,o))))}),o}}const dt=e=>(e/1e3).toFixed(2),lt=e=>{const t=window.performance.now(),r=e.querySelectorAll("*").length;let n=0,o=0;return{increment:()=>{o+=1},addWaitTime:e=>{n+=e},get progress(){return o/r},end:()=>{const e=window.performance.now(),r=e-t-n;console.log(`ðŸ“– Layout ready in ${dt(r)}s (plus ${dt(n)}s waiting for images)`)}}},st=async(e,t,r)=>{if(!Ge.isSizeValid())throw Error("Page is too small");const n=lt(e),o=new it(t),a=new Ze,i=o.pageNumberOffset,d=()=>new Ge,l=(e,t)=>{a.updatePageOrder(),$e(a.pages,i),o.applyPageDoneRules(e,a),e.validateEnd(t),a.validate()},s=(e=!1)=>{const t=a.currentPage;t&&l(t,e);const o=d();return a.currentPage=o,a.addPage(o),r(a,n.progress),o.validate(),o},p=o.applySplitRules,c=o.selectorsNotToSplit,g=e=>!c.some(t=>e.matches(t))&&(!e.parentElement||g(e.parentElement));return e.style.margin=0,e.style.padding=0,await Ye({content:e,createRegion:()=>{const e=s();return e.flow},applySplit:p,canSplit:g,beforeAdd:(e,t)=>{o.applyBeforeAddRules(e,a,t,d)},afterAdd:(e,t)=>(n.increment(),o.applyAfterAddRules(e,a,t,d)),shouldTraverse:o.shouldTraverse,didWaitFor:e=>n.addWaitTime(e)}),a.updatePageOrder(),$e(a.pages,i),o.finishEveryPage(a),n.end(),a},pt=e=>"function"==typeof e,ct=(e,t,r,n,o)=>{const a=document.createElement(e);if(t&&(a.className=t),o&&(a.textContent=o),r)for(const e in r){const t=r[e];pt(t)?a[e]=t:a.setAttribute(e,t)}return n&&n.forEach(e=>a.appendChild(e)),a},h=(e,t,r)=>ct("div",e,{},t,r),gt=(e,t,r)=>ct("button",e,t,[],r),ht=(e,t,r)=>ct("select",e,t,r),ut=(e,t)=>ct("option",null,e,[],t),mt=e=>R("row",e),ft=(e,t)=>gt(`${M("control")} ${M("btn")} ${M("btn-main")}`,e,t),bt=(e,t)=>{const r=R("select-val",[]),n=ht(M("select"),e,t),o=()=>{r.textContent=n.options[n.selectedIndex].text};return n.addEventListener("change",o),o(),R(".select-wrap.control",[r,n])},wt=!!window.chrome;class vt{constructor(e,t,r){const{Mode:n,Paper:o,Layout:a,Marks:i}=e;let d,l;const s=()=>{r.setMode(n.PRINT);const e=d.querySelector("select");e.value=n.PRINT,e.dispatchEvent(new Event("change")),setTimeout(window.print,10)},p=ft({onclick:s},"Print"),c=(wt?[ut({value:o.AUTO},"Auto"),ut({value:o.AUTO_BLEED},"Auto + Bleed"),ut({value:o.AUTO_MARKS},"Auto + Marks"),ut({value:o.LETTER_PORTRAIT},"Letter Portrait"),ut({value:o.LETTER_LANDSCAPE},"Letter Landscape"),ut({value:o.A4_PORTRAIT},"A4 Portrait"),ut({value:o.A4_LANDSCAPE},"A4 Landscape")]:[ut({value:o.LETTER_PORTRAIT,selected:!0},"Default Page Size *"),ut({disabled:!0},"Only Chrome supports custom page sizes. Set in your browser's print dialog instead.")]).map(e=>(parseInt(e.value,10)===t.paper&&(e.selected=!0),e)),g=()=>{if(!wt)return;const e=r.getPageSize(),t=`${e.width} Ã— ${e.height}`;c[0].textContent=`${t}`,c[1].textContent=`${t} + Bleed`,c[2].textContent=`${t} + Marks`};g();const u=t=>{const e=parseInt(t.target.value,10);r.setPaper(e),e===o.AUTO||e===o.AUTO_BLEED?l.classList.add(M("hidden-select")):l.classList.remove(M("hidden-select"))},m=bt({onchange:u},c),f=bt({onchange:t=>{r.setLayout(t.target.value),g()}},[ut({value:a.PAGES},"1 Page / Sheet"),ut({value:a.SPREADS},"1 Spread / Sheet"),ut({value:a.BOOKLET},"Booklet Sheets")].map(e=>(parseInt(e.value,10)===t.layout&&(e.selected=!0),e))),b=mt([f]);l=bt({onchange:t=>r.setMarks(t.target.value)},[ut({value:i.NONE},"No Marks"),ut({value:i.CROP,selected:!0},"Crop Marks"),ut({value:i.BLEED},"Bleed Marks"),ut({value:i.BOTH},"Crop and Bleed")].map(e=>(e.value===t.marks&&(e.selected=!0),e))),wt&&l.classList.add(M("hidden-select"));const w=mt([l]),v=mt([m]);this.setDone=()=>{},this.setInProgress=()=>{},this.updateProgress=()=>{},p.classList.add(M("btn-print"));const y=mt([b,v,w]);y.classList.add(M("print-options")),d=bt({onchange:t=>r.setMode(t.target.value)},[ut({value:n.PREVIEW},"Grid"),ut({value:n.FLIPBOOK},"Flipbook"),ut({value:n.PRINT},"Print Preview")].map(e=>(e.value===t.mode&&(e.selected=!0),e)));const k=mt([d]);k.classList.add(M("view-row")),this.element=h(M("controls"),[k,y,p])}}const yt=(e,t)=>{if(0!=e.length%2){const r=t();e.push(r)}const r=t(),n=t();return r.element.style.visibility="hidden",n.element.style.visibility="hidden",e.unshift(r),e.push(n),e},kt=e=>R(".spread-wrapper.spread-centered.spread-size",e),xt=e=>R(".spread-wrapper.spread-centered.page-size",e),Pt=(e,t)=>{const r=t?yt(e,()=>new Ge):e,n=document.createDocumentFragment();if(t)for(let e=0;e<r.length;e+=2){const t=kt([r[e].element,r[e+1].element]);n.appendChild(t)}else r.forEach(e=>{const t=xt([e.element]);n.appendChild(t)});return n},Et=["top","bottom","left","right"],Ct=()=>Et.map(e=>R(`.mark-bleed-${e}`)),St=()=>Et.map(e=>R(`.mark-crop-${e}`)),Lt=()=>R(".page-size.print-mark-wrap",[...St(),...Ct()]),Tt=()=>R(".spread-size.print-mark-wrap",[R(".mark-crop-fold"),...St(),...Ct()]),Rt=(e,t)=>{const r=parseInt((e+1)/4,10)+1;return R(".print-meta",`Sheet ${r} of ${t/4}: ${0==e%4?"Outside":"Inside"}`)},zt=(e,t)=>{for(;0!=e.length%4;){const r=t();r.element.style.visibility="hidden",e.push(r)}const r=[],n=e.length;for(let o=0;o<n/2;o+=2)r.push(e[n-1-o]),r.push(e[o]),r.push(e[o+1]),r.push(e[n-2-o]);return r},At=e=>R(".spread-wrapper",e),Ot=e=>R(".spread-wrapper",e),Nt=(e,t,r)=>{const n=r!==w,o=r===y;let a=e;r===v?a=yt(a,()=>new Ge):o&&(a=zt(a,()=>new Ge));const d=document.createDocumentFragment(),l=n?Tt:Lt,s=n?At:Ot,p=e=>R("print-sheet",[s(e)]);if(n)for(let e=0;e<a.length;e+=2){const t=l();if(o){const r=Rt(e,a.length);t.appendChild(r)}const r=p([R(".page-bleed-clip.page-bleed-clip-left",[a[e].element]),R(".page-bleed-clip.page-bleed-clip-right",[a[e+1].element]),t]);r.classList.add(S.sheetSpread),d.appendChild(r)}else a.forEach(e=>{const t=p([e.element,l()]);t.classList.add(e.isLeft?S.sheetLeft:S.sheetRight),d.appendChild(t)});return d},Bt=(e,t)=>{const r=yt(e,()=>new Ge),n=document.createDocumentFragment(),o=R(".spread-size.flip-sizer"),a=R(".spread-size.flap-holder");o.appendChild(a),n.appendChild(o);const d=[];let l=-1,s=4;60<r.length*s&&(s=60/r.length),a.style.width=`${r.length*s}px`;const p=e=>{let t=e;t===l&&(t+=1),l=t;let r=4;200<d.length*r&&(r=200/d.length),d.forEach((e,n,o)=>{var a=Math.abs;const i=(o.length-a(n-t+.5))*r;e.style.transform=`translate3d(${n<t?4:0}px,0,${i}px) rotateY(${n<t?-180:0}deg)`})};let c=0;for(let n=1;n<r.length-1;n+=t?2:1){c+=1;const e=c,o=R(".page3d");o.addEventListener("click",()=>{p(e-1)});const i=r[n].element;let l;i.classList.add(M("page3d-front")),o.appendChild(i),t?(o.classList.add(M("doubleSided")),l=r[n+1].element):l=R(".page"),l.classList.add(M("page3d-back")),o.appendChild(l),o.style.left=`${n*s}px`,d.push(o),a.appendChild(o)}return p(0),n},Mt=t=>(t.ctrlKey||t.metaKey)&&80===t.keyCode,Ft=t=>{if(window.matchMedia){const e=window.matchMedia("print");e.addListener(e=>{e.matches&&t()})}document.body.addEventListener("keydown",r=>{Mt(r)&&(r.preventDefault(),t(),setTimeout(()=>window.print(),200))})},It=(()=>{let e,t=!1;const r=n=>t?void(e=n):void(t=!0,n(),requestAnimationFrame(()=>{if(t=!1,e){const t=e;e=null,r(t)}}));return r})(),Ht=ie(100),Vt=ie(50),Dt=window.document;class jt{constructor({pageSetup:e,mode:t,layout:r,marks:n}){this.book=null,this.pageSetup=e,this.progressBar=R("progress-bar"),this.content=R("zoom-content"),this.scaler=R("zoom-scaler",[this.content]),this.element=R("root",[this.progressBar,this.scaler]),this.doubleSided=!0,this.layout=r,this.setMarks(n),this.mode=t,this.element.classList.add(S.viewPreview),this.currentLeaf=0,Ft(()=>{this.mode=f,this.render()}),window.addEventListener("resize",()=>{Vt(()=>this.scaleToFit())}),this.controls=new vt({Mode:b,Paper:u,Layout:k,Marks:C},{paper:this.pageSetup.paper,layout:this.layout,mode:this.mode,marks:n},{setMode:this.setMode.bind(this),setPaper:this.setSheetSize.bind(this),setLayout:this.setLayout.bind(this),setMarks:this.setMarks.bind(this),getPageSize:()=>this.pageSetup.displaySize}),this.element.appendChild(this.controls.element),this.inProgress=!0,this.show()}setMode(e){const t=parseInt(e,10);t===this.mode||(this.mode=t,this.render())}get inProgress(){return this.element.classList.contains(S.inProgress)}set inProgress(e){this.element.classList.toggle(S.inProgress,e),e&&this.controls&&this.controls.setInProgress()}get isTwoUp(){return this.layout!==w}get isShowingCropMarks(){return this.element.classList.contains(S.showCrop)}set isShowingCropMarks(e){this.element.classList.toggle(S.showCrop,e)}get isShowingBleedMarks(){return this.element.classList.contains(S.showBleedMarks)}set isShowingBleedMarks(e){this.element.classList.toggle(S.showBleedMarks,e)}get isShowingBleed(){return this.element.classList.contains(S.showBleed)}set isShowingBleed(e){this.element.classList.toggle(S.showBleed,e)}get isViewing(){return Dt.body.classList.contains(S.isViewing)}set isViewing(e){Dt.body.classList.toggle(S.isViewing,e)}setSheetSize(e){const t=parseInt(e,10);this.pageSetup.paper=t,this.pageSetup.updateStyleVars(),this.mode=f,this.render(),this.scaleToFit(),setTimeout(()=>{this.scaleToFit()},300)}setLayout(e){const t=parseInt(e,10);t===this.layout||(this.layout=t,this.pageSetup.printTwoUp=this.isTwoUp,this.pageSetup.updateStyleVars(),this.mode=f,this.render())}setMarks(e){const t=parseInt(e,10);this.isShowingCropMarks=t===x||t===E,this.isShowingBleedMarks=t===P||t===E}displayError(t,r){if(this.show(),!this.error&&(this.error=e(t,r),this.element.appendChild(this.error),this.scrollToBottom(),this.book)){const e=this.book.currentPage.flow;e&&(e.currentElement.style.outline="3px solid red")}}scrollToBottom(){const e=Dt.scrollingElement;if(e){const t=e.scrollHeight-e.offsetHeight;e.scrollTop=t}}clear(){this.book=null,this.lastSpreadInProgress=null,this.content.innerHTML=""}show(){this.element.parentNode||(Dt.body.appendChild(this.element),this.isViewing=!0)}hide(){this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.isViewing=!1)}render(e){if(e&&(this.book=e),!this.book)return;this.show(),this.element.classList.remove(...S.allModes),this.element.classList.add(S[this.mode]),this.isShowingBleed=this.mode===f;const t=this.scrollPercent;this.controls&&this.controls.setDone(this.book.pages.length),this.progress=1,window.requestAnimationFrame(()=>{const e=this.book.pages.slice(),r=this.viewFor(this.mode)(e,this.doubleSided,this.layout);this.content.innerHTML="",this.content.appendChild(r),this.hasRendered?this.scrollPercent=t:this.hasRendered=!0,this.scaleToFit()})}viewFor(e){if(e===m)return Pt;if(e===1)return Bt;if(e===f)return Nt;throw Error(`Invalid layout mode: ${this.mode} (type ${typeof this.mode})`)}set progress(e){1>e?It(()=>{this.progressBar.style.transform=`scaleX(${e})`}):this.progressBar.style.transform=""}updateProgress(e,t){if(this.book=e,this.progress=t,!Dt||!Dt.scrollingElement)return;const r=Dt.scrollingElement.scrollTop,n=Dt.scrollingElement.scrollHeight,o=Dt.scrollingElement.offsetHeight;n>3*o&&r<o||Ht(()=>this.renderProgress(e,t))}renderProgress(e,t){const r=!this.content.firstElementChild;this.controls&&this.controls.updateProgress(e.pageCount,t);const n=this.mode===m||this.mode===f&&this.layout!==w,o=n?2:1,a=e=>R(".spread-wrapper.spread-centered.spread-size",e);e.pages.forEach((e,t)=>{if(!(this.content.contains(e.element)&&e.element.parentNode!==this.content)){if(this.lastSpreadInProgress&&this.lastSpreadInProgress.children.length<o)return void this.lastSpreadInProgress.appendChild(e.element);if(this.lastSpreadInProgress=a([e.element]),0===t&&n){const e=new Ge;e.element.style.visibility="hidden",this.lastSpreadInProgress.insertBefore(e.element,this.lastSpreadInProgress.firstElementChild)}this.content.appendChild(this.lastSpreadInProgress)}}),r&&this.scaleToFit()}scaleToFit(){if(this.content.firstElementChild){const e=this.scrollPercent;this.scaler.style.transform=`scale(${this.scaleThatFits})`,this.scrollPercent=e}}get scaleThatFits(){var e=Math.min;const t=this.scaler.getBoundingClientRect().width,r=this.content.getBoundingClientRect().width;return e(1,t/r)}get scrollPercent(){if(!Dt||!Dt.scrollingElement)return 0;const e=Dt.scrollingElement;return e.scrollTop/e.scrollHeight}set scrollPercent(e){if(Dt&&Dt.scrollingElement){const t=Dt.scrollingElement;t.scrollTop=t.scrollHeight*e}}}const Ut=e=>Object.keys(e).map(t=>e[t]),_t=()=>new Promise(e=>{requestAnimationFrame(r=>e(r))});class qt{constructor(e={}){if(console.log(`ðŸ“– Bindery ${t}`),!e.content)throw this.viewer.displayError("Content not specified","You must include a source element, selector, or url"),Error("Bindery: You must include a source element or selector");if(e.ControlsComponent)throw this.viewer.displayError("Controls are now included","Please remove the controls component"),Error("Bindery: controls are now included");this.autorun=e.autorun||!0,this.autoupdate=e.autoupdate||!1,q(e,{name:"makeBook",autorun:Z.bool,content:Z.any,view:Z.enum(...Ut(b)),pageNumberOffset:Z.number,pageSetup:Z.shape({name:"pageSetup",margin:Z.margin,size:Z.size}),printSetup:Z.shape({name:"printSetup",bleed:Z.length,layout:Z.enum(...Ut(k)),marks:Z.enum(...Ut(C)),paper:Z.enum(...Ut(u))}),rules:Z.array}),this.pageSetup=new U(e.pageSetup,e.printSetup);const r=e.printSetup?e.printSetup.layout||w:w,n=e.printSetup?e.printSetup.marks||x:x;this.viewer=new jt({pageSetup:this.pageSetup,mode:e.view||m,marks:n,layout:r}),this.rules=ye,this.rules.push({pageNumberOffset:e.pageNumberOffset||0}),e.rules&&this.addRules(e.rules),this.getContentAsElement(e.content).then(e=>{this.content=e,e&&this.autorun&&this.makeBook()})}static makeBook(e={}){return e.autorun=!e.autorun||e.autorun,new qt(e)}async getContentAsElement(e){if(e instanceof HTMLElement)return e;if("string"==typeof e){const t=document.querySelector(e);return t instanceof HTMLElement||(this.viewer.displayError("Content not specified",`Could not find element that matches selector "${e}"`),console.error(`Bindery: Could not find element that matches selector "${e}"`)),t}if("object"==typeof e&&e.url)return this.fetchContent(e.url,e.selector);throw Error("Bindery: Source must be an element or selector")}async fetchContent(e,t){const r=await fetch(e);if(200!==r.status)throw this.viewer.displayError(r.status,`Could not find file at "${e}"`),Error(`Bindery: Could not find file at "${e}"`);const n=await r.text(),o=B(n,t);if(!(o instanceof HTMLElement))throw this.viewer.displayError("Source not specified",`Could not find element that matches selector "${t}"`),Error(`Bindery: Could not find element that matches selector "${t}"`);return o}cancel(){this.viewer.hide(),this.content&&(this.content.style.display="")}addRules(e){e.forEach(e=>{if(e instanceof he.Rule)this.rules.push(e);else throw Error(`Bindery: The following is not an instance of Bindery.Rule and will be ignored: ${e}`)})}async makeBook(){if(!this.content)return this.viewer.show(),console.error("No content"),null;this.content.style.display="";const e=this.content.cloneNode(!0);this.content.style.display="none",this.layoutInProgress=!0,this.viewer.clear(),this.viewer.show(),this.pageSetup.updateStyleVars(),this.viewer.inProgress=!0;try{const t=await st(e,this.rules,(e,t)=>this.viewer.updateProgress(e,t));return this.viewer.progress=1,this.layoutInProgress=!1,await _t(),this.viewer.render(t),this.viewer.inProgress=!1,t}catch(t){return this.layoutInProgress=!1,this.viewer.inProgress=!1,this.viewer.displayError("Layout couldn't complete",t.message),console.error(t),null}}}(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}})(".\uD83D\uDCD6-page{width:var(--bindery-page-width);height:var(--bindery-page-height);position:relative;display:flex;flex-direction:column;flex-wrap:nowrap}.\uD83D\uDCD6-continuation{text-indent:unset!important}li.continuation{list-style:none!important}.\uD83D\uDCD6-flow-box{position:relative;margin-top:var(--bindery-margin-top);flex:1 1 auto;min-height:0}.\uD83D\uDCD6-footer{margin-top:8pt;margin-bottom:var(--bindery-margin-bottom);flex:0 1 auto;z-index:2}.\uD83D\uDCD6-flow-box,.\uD83D\uDCD6-footer{margin-left:var(--bindery-margin-inner);margin-right:var(--bindery-margin-outer)}.\uD83D\uDCD6-left .\uD83D\uDCD6-flow-box,.\uD83D\uDCD6-left .\uD83D\uDCD6-footer{margin-left:var(--bindery-margin-outer);margin-right:var(--bindery-margin-inner)}.\uD83D\uDCD6-page-background{position:absolute;z-index:0;overflow:hidden;top:calc(-1*var(--bindery-bleed));bottom:calc(-1*var(--bindery-bleed));left:calc(-1*var(--bindery-bleed));right:calc(-1*var(--bindery-bleed))}.\uD83D\uDCD6-left>.\uD83D\uDCD6-page-background{right:0}.\uD83D\uDCD6-right>.\uD83D\uDCD6-page-background{left:0}.\uD83D\uDCD6-sup{font-size:.667em}.\uD83D\uDCD6-footer,.\uD83D\uDCD6-running-header{font-size:10pt}.\uD83D\uDCD6-running-header{position:absolute;text-align:center;top:.25in}.\uD83D\uDCD6-left .\uD83D\uDCD6-running-header{text-align:left;left:var(--bindery-margin-outer)}.\uD83D\uDCD6-right .\uD83D\uDCD6-running-header{right:var(--bindery-margin-outer);text-align:right}.\uD83D\uDCD6-page-size-rotated{height:var(--bindery-page-width);width:var(--bindery-page-height)}.\uD83D\uDCD6-spread-size{height:var(--bindery-page-height);width:calc(var(--bindery-page-width)*2)}.\uD83D\uDCD6-spread-size-rotated{width:var(--bindery-page-height);height:calc(var(--bindery-page-width)*2)}.\uD83D\uDCD6-spread.\uD83D\uDCD6-right>.\uD83D\uDCD6-page-background{left:calc(-100% - var(--bindery-bleed))}.\uD83D\uDCD6-spread.\uD83D\uDCD6-left>.\uD83D\uDCD6-page-background{right:calc(-100% - var(--bindery-bleed))}@media screen{.\uD83D\uDCD6-viewing .\uD83D\uDCD6-controls{display:flex!important}}.\uD83D\uDCD6-controls{font:14px/1.4 -apple-system,BlinkMacSystemFont,Roboto,sans-serif;display:none;flex-direction:row;align-items:start;position:fixed;top:0;left:0;right:0;z-index:999;margin:auto;color:var(--bindery-ui-text);padding:10px;overflow:hidden;transition:height .3s;-webkit-font-smoothing:antialiased}.\uD83D\uDCD6-controls *{font:inherit;color:inherit;margin:0;padding:0;box-sizing:border-box}.\uD83D\uDCD6-controls a{color:var(--bindery-ui-accent);text-decoration:none}.\uD83D\uDCD6-row{position:relative;display:flex;flex-wrap:wrap;align-items:start;cursor:default;user-select:none}.\uD83D\uDCD6-print-options{display:none}.\uD83D\uDCD6-view-print .\uD83D\uDCD6-print-options{display:flex}.\uD83D\uDCD6-in-progress .\uD83D\uDCD6-print-options{display:none}.\uD83D\uDCD6-controls .\uD83D\uDCD6-btn{-webkit-appearance:none;cursor:pointer;display:inline-block;margin-right:8px;text-decoration:none}.\uD83D\uDCD6-controls .\uD83D\uDCD6-btn:hover{background:rgba(0,0,0,.04)}.\uD83D\uDCD6-controls .\uD83D\uDCD6-btn:active{background:rgba(0,0,0,.08)}.\uD83D\uDCD6-controls .\uD83D\uDCD6-btn:last-child{margin-right:0}.\uD83D\uDCD6-control{border-radius:6px;color:var(--bindery-ui-text);padding:4px 10px;border:1px solid #ddd;margin-right:12px}.\uD83D\uDCD6-controls .\uD83D\uDCD6-btn-light{background:none;border:none}.\uD83D\uDCD6-controls .\uD83D\uDCD6-btn-main{background:var(--bindery-ui-accent);border-color:var(--bindery-ui-accent);color:#fff}.\uD83D\uDCD6-controls .\uD83D\uDCD6-btn-main:hover{background:var(--bindery-ui-accent);opacity:.7}.\uD83D\uDCD6-controls .\uD83D\uDCD6-btn-main:active{background:#000;opacity:1}.\uD83D\uDCD6-view-row{transition:all .3s}.\uD83D\uDCD6-in-progress .\uD83D\uDCD6-view-row{opacity:0;pointer-events:none}.\uD83D\uDCD6-debug .\uD83D\uDCD6-view-row{display:none}.\uD83D\uDCD6-btn-print{margin-left:auto;transition:all .3s}.\uD83D\uDCD6-in-progress .\uD83D\uDCD6-btn-print{opacity:0;pointer-events:none}.\uD83D\uDCD6-controls .\uD83D\uDCD6-select-wrap{padding-right:24px;transition:all .2s;white-space:nowrap;width:100%;position:relative}.\uD83D\uDCD6-controls .\uD83D\uDCD6-select-wrap:after{content:\"\";position:absolute;right:9px;top:12px;padding:0;border:4px solid transparent;border-top-color:currentcolor}.\uD83D\uDCD6-controls .\uD83D\uDCD6-select-wrap:hover{background-color:rgba(0,0,0,.04)}.\uD83D\uDCD6-controls .\uD83D\uDCD6-select-wrap:active{background-color:rgba(0,0,0,.04)}.\uD83D\uDCD6-controls .\uD83D\uDCD6-select-wrap.\uD83D\uDCD6-hidden-select{max-width:0;padding-left:0;padding-right:0;border-left-width:0;border-right-width:0;color:transparent}.\uD83D\uDCD6-select{cursor:pointer;position:absolute;top:0;left:0;opacity:0;-webkit-appearance:none;-moz-appearance:none;padding:4px 10px;color:#000;border:transparent;width:100%}@media screen and (max-width:720px){.\uD83D\uDCD6-print-options{max-width:unset;max-height:0}.\uD83D\uDCD6-view-print .\uD83D\uDCD6-print-options{max-width:unset;max-height:240px;margin:0}.\uD83D\uDCD6-root{transition:all .2s}.\uD83D\uDCD6-view-print.\uD83D\uDCD6-root{padding-top:120px}.\uD83D\uDCD6-view-print .\uD83D\uDCD6-controls{height:64px}.\uD83D\uDCD6-print-options{top:48px;left:10px;position:fixed;margin:0}}.\uD83D\uDCD6-view-print .\uD83D\uDCD6-controls{background:var(--bindery-ui-bg)}.\uD83D\uDCD6-view-flip .\uD83D\uDCD6-controls{background:transparent;box-shadow:none}@media screen and (max-width:960px){.\uD83D\uDCD6-in-progress .\uD83D\uDCD6-controls{background:transparent;box-shadow:none}.\uD83D\uDCD6-in-progress .\uD83D\uDCD6-root{padding-top:40px}.\uD83D\uDCD6-controls{background:var(--bindery-ui-bg)}.\uD83D\uDCD6-root{padding-top:72px}}@media screen and (max-width:500px){.\uD83D\uDCD6-view-print.\uD83D\uDCD6-root{padding-top:190px}.\uD83D\uDCD6-view-print .\uD83D\uDCD6-controls{background:var(--bindery-ui-bg);height:140px}.\uD83D\uDCD6-print-options{flex-direction:column;align-items:stretch;left:10px;right:10px}.\uD83D\uDCD6-print-options .\uD83D\uDCD6-row{margin-bottom:.25rem}.\uD83D\uDCD6-print-options .\uD83D\uDCD6-select-wrap{margin:0}.\uD83D\uDCD6-hidden-select{display:none}}.\uD83D\uDCD6-left .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-outward,.\uD83D\uDCD6-left .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-spread-clockwise,.\uD83D\uDCD6-right .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-inward,.\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-clockwise{transform:rotate(90deg) translate3d(0,-100%,0);transform-origin:top left}.\uD83D\uDCD6-left .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-inward,.\uD83D\uDCD6-left .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-spread-counterclockwise,.\uD83D\uDCD6-right .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-outward,.\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-counterclockwise{transform:rotate(-90deg) translate3d(-100%,0,0);transform-origin:top left}.\uD83D\uDCD6-rotate-container{position:absolute}.\uD83D\uDCD6-left .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-clockwise .\uD83D\uDCD6-page-background{top:0}.\uD83D\uDCD6-left .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-counterclockwise .\uD83D\uDCD6-page-background,.\uD83D\uDCD6-right .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-clockwise .\uD83D\uDCD6-page-background{bottom:0}.\uD83D\uDCD6-right .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-counterclockwise .\uD83D\uDCD6-page-background{top:0}.\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-inward .\uD83D\uDCD6-page-background{bottom:0}.\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-outward .\uD83D\uDCD6-page-background{top:0}.\uD83D\uDCD6-right .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-spread-clockwise{transform:rotate(90deg) translate3d(0,-50%,0);transform-origin:top left}.\uD83D\uDCD6-right .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-spread-counterclockwise{transform:rotate(-90deg) translate3d(-100%,-50%,0);transform-origin:top left}:root{--bindery-ui-bg:#f4f4f4;--bindery-ui-accent:#000;--bindery-ui-text:#000}@media screen{.\uD83D\uDCD6-root{transition:opacity .2s;opacity:1;background:var(--bindery-ui-bg);z-index:99;position:relative;padding-top:40px;min-height:100vh}.\uD83D\uDCD6-view-flip .\uD83D\uDCD6-root{padding-top:0}.\uD83D\uDCD6-progress-bar{transform-origin:top left;transform:scaleY(0);position:fixed;left:0;top:0;right:0;background:var(--bindery-ui-accent);transition:transform .2s;height:2px;z-index:99}.\uD83D\uDCD6-in-progress .\uD83D\uDCD6-progress-bar{transform:scaleX(0)}.\uD83D\uDCD6-zoom-content{padding:10px;background:var(--bindery-ui-bg);position:absolute;left:0;right:0;margin:auto}.\uD83D\uDCD6-view-preview .\uD83D\uDCD6-zoom-content{min-width:calc(20px + var(--bindery-spread-width))}.\uD83D\uDCD6-view-flip .\uD83D\uDCD6-zoom-content{min-width:calc(1.1*var(--bindery-spread-width))}.\uD83D\uDCD6-view-print .\uD83D\uDCD6-zoom-content{min-width:calc(20px + var(--bindery-sheet-width))}.\uD83D\uDCD6-zoom-content>.\uD83D\uDCD6-page{margin:auto}.\uD83D\uDCD6-measure-area{position:fixed;padding:50px 20px;z-index:99;visibility:hidden;top:0;left:0;width:0;height:0;overflow:hidden}.\uD83D\uDCD6-is-overflowing{border-bottom:1px solid #f0f}.\uD83D\uDCD6-print-sheet{margin:0 auto}.\uD83D\uDCD6-error{font:16px/1.4 -apple-system,BlinkMacSystemFont,Roboto,sans-serif;padding:15vh 15vw;z-index:999;position:fixed;top:0;left:0;right:0;bottom:0;background:hsla(0,0%,95.7%,.7)}.\uD83D\uDCD6-error-title{font-size:1.5em;margin-bottom:16px}.\uD83D\uDCD6-error-text{margin-bottom:16px;white-space:pre-line}.\uD83D\uDCD6-error-footer{opacity:.5;font-size:.66em;text-transform:uppercase;letter-spacing:.02em}.\uD83D\uDCD6-show-bleed .\uD83D\uDCD6-print-sheet{background:#fff;outline:1px solid rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.2);margin:20px auto}}@media screen{.\uD83D\uDCD6-page{background:#fff;box-shadow:0 0 0 .5px rgba(0,0,0,.3);overflow:hidden}.\uD83D\uDCD6-show-bleed .\uD83D\uDCD6-page{box-shadow:none;overflow:visible}.\uD83D\uDCD6-show-bleed .\uD83D\uDCD6-page:after{content:\"\";outline:1px dotted rgba(0,255,255,.7);position:absolute;left:0;right:0;bottom:0;top:0;z-index:99}.\uD83D\uDCD6-placeholder-num{visibility:hidden!important}}.\uD83D\uDCD6-print-sheet{width:var(--bindery-sheet-width);height:var(--bindery-sheet-height)}.\uD83D\uDCD6-page-bleed-clip{overflow:hidden}.\uD83D\uDCD6-page-bleed-clip-left{padding-left:calc(var(--bindery-bleed) + 12pt)}.\uD83D\uDCD6-page-bleed-clip-right{padding-right:calc(var(--bindery-bleed) + 12pt)}.\uD83D\uDCD6-show-bleed-marks .\uD83D\uDCD6-print-sheet .\uD83D\uDCD6-page-bleed-clip,.\uD83D\uDCD6-show-crop .\uD83D\uDCD6-print-sheet .\uD83D\uDCD6-page-bleed-clip{padding-top:calc(var(--bindery-bleed) + 12pt);padding-bottom:calc(var(--bindery-bleed) + 12pt)}.\uD83D\uDCD6-print-sheet-spread .\uD83D\uDCD6-spread-wrapper{margin-left:auto;margin-right:auto}.\uD83D\uDCD6-viewing{margin:0}.\uD83D\uDCD6-zoom-scaler{transform-origin:top left;transform-style:preserve-3d;height:calc(100vh - 120px)}.\uD83D\uDCD6-print-sheet{position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center;transition:all .2s}.\uD83D\uDCD6-print-sheet-left{justify-content:left}.\uD83D\uDCD6-print-sheet-right{justify-content:right}.\uD83D\uDCD6-spread-wrapper{position:relative;display:flex;justify-content:center;margin:auto}.\uD83D\uDCD6-spread-centered{margin:0 auto 32px}@page{margin:0}@media print{.\uD83D\uDCD6-root *{-webkit-print-color-adjust:exact;color-adjust:exact}.\uD83D\uDCD6-controls{display:none!important}.\uD83D\uDCD6-print-sheet{contain:layout;margin:0 auto;page-break-after:always}.\uD83D\uDCD6-zoom-scaler[style]{transform:none!important}}.\uD83D\uDCD6-print-mark-wrap{display:none;position:absolute;pointer-events:none;top:0;bottom:0;left:0;right:0;z-index:999;margin:auto}.\uD83D\uDCD6-show-bleed-marks .\uD83D\uDCD6-print-mark-wrap,.\uD83D\uDCD6-show-crop .\uD83D\uDCD6-print-mark-wrap{display:block}.\uD83D\uDCD6-show-crop .\uD83D\uDCD6-print-mark-wrap>[class*=crop]{display:block}.\uD83D\uDCD6-show-bleed-marks .\uD83D\uDCD6-print-mark-wrap>[class*=bleed]{display:block}.\uD83D\uDCD6-print-mark-wrap>div{display:none;position:absolute;overflow:hidden}.\uD83D\uDCD6-print-mark-wrap>div:after,.\uD83D\uDCD6-print-mark-wrap>div:before{content:\"\";display:block;position:absolute}.\uD83D\uDCD6-print-mark-wrap>div:before{top:0;left:0}.\uD83D\uDCD6-print-mark-wrap>div:after{bottom:0;right:0}.\uD83D\uDCD6-mark-bleed-left,.\uD83D\uDCD6-mark-bleed-right,.\uD83D\uDCD6-mark-crop-fold,.\uD83D\uDCD6-mark-crop-left,.\uD83D\uDCD6-mark-crop-right{width:1px;margin:auto}.\uD83D\uDCD6-mark-bleed-left:after,.\uD83D\uDCD6-mark-bleed-left:before,.\uD83D\uDCD6-mark-bleed-right:after,.\uD83D\uDCD6-mark-bleed-right:before,.\uD83D\uDCD6-mark-crop-fold:after,.\uD83D\uDCD6-mark-crop-fold:before,.\uD83D\uDCD6-mark-crop-left:after,.\uD83D\uDCD6-mark-crop-left:before,.\uD83D\uDCD6-mark-crop-right:after,.\uD83D\uDCD6-mark-crop-right:before{width:1px;height:var(--bindery-mark-length);background-image:linear-gradient(90deg,#000 0,#000 51%,transparent 0);background-size:1px 100%}.\uD83D\uDCD6-mark-bleed-bottom,.\uD83D\uDCD6-mark-bleed-top,.\uD83D\uDCD6-mark-crop-bottom,.\uD83D\uDCD6-mark-crop-top{height:1px}.\uD83D\uDCD6-mark-bleed-bottom:after,.\uD83D\uDCD6-mark-bleed-bottom:before,.\uD83D\uDCD6-mark-bleed-top:after,.\uD83D\uDCD6-mark-bleed-top:before,.\uD83D\uDCD6-mark-crop-bottom:after,.\uD83D\uDCD6-mark-crop-bottom:before,.\uD83D\uDCD6-mark-crop-top:after,.\uD83D\uDCD6-mark-crop-top:before{width:var(--bindery-mark-length);height:1px;background-image:linear-gradient(180deg,#000 0,#000 51%,transparent 0);background-size:100% 1px}.\uD83D\uDCD6-mark-crop-fold{right:0;left:0}.\uD83D\uDCD6-mark-crop-left{left:0}.\uD83D\uDCD6-mark-crop-right{right:0}.\uD83D\uDCD6-mark-crop-top{top:0}.\uD83D\uDCD6-mark-crop-bottom{bottom:0}.\uD83D\uDCD6-print-meta{padding:var(--bindery-mark-length);text-align:center;font-family:-apple-system,BlinkMacSystemFont,Roboto,sans-serif;font-size:8pt;display:block!important;position:absolute;bottom:-60pt;left:0;right:0}.\uD83D\uDCD6-mark-bleed-left,.\uD83D\uDCD6-mark-bleed-right,.\uD83D\uDCD6-mark-crop-fold,.\uD83D\uDCD6-mark-crop-left,.\uD83D\uDCD6-mark-crop-right{top:calc(-1*var(--bindery-mark-length) - var(--bindery-bleed));bottom:calc(-1*var(--bindery-mark-length) - var(--bindery-bleed))}.\uD83D\uDCD6-mark-bleed-bottom,.\uD83D\uDCD6-mark-bleed-top,.\uD83D\uDCD6-mark-crop-bottom,.\uD83D\uDCD6-mark-crop-top{left:calc(-12pt - var(--bindery-bleed));right:calc(-12pt - var(--bindery-bleed))}.\uD83D\uDCD6-mark-bleed-left{left:calc(-1*var(--bindery-bleed))}.\uD83D\uDCD6-mark-bleed-right{right:calc(-1*var(--bindery-bleed))}.\uD83D\uDCD6-mark-bleed-top{top:calc(-1*var(--bindery-bleed))}.\uD83D\uDCD6-mark-bleed-bottom{bottom:calc(-1*var(--bindery-bleed))}.\uD83D\uDCD6-view-flip .\uD83D\uDCD6-zoom-scaler{transform-origin:center left}.\uD83D\uDCD6-flap-holder{perspective:5000px;position:absolute;top:0;right:0;left:0;bottom:0;margin:auto;transform-style:preserve-3d}.\uD83D\uDCD6-flip-sizer{position:relative;margin:auto;padding:0 20px;box-sizing:content-box;height:90vh!important}.\uD83D\uDCD6-page3d{margin:auto;width:var(--bindery-page-width);height:var(--bindery-page-height);transform:rotateY(0);transform-style:preserve-3d;transform-origin:left;transition:transform .5s,box-shadow .1s;position:absolute;left:0;right:0;top:0;bottom:0}.\uD83D\uDCD6-page3d:hover{box-shadow:2px 0 4px rgba(0,0,0,.2)}.\uD83D\uDCD6-page3d.\uD83D\uDCD6-flipped{transform:rotateY(-180deg)}.\uD83D\uDCD6-page3d .\uD83D\uDCD6-page{position:absolute;backface-visibility:hidden;-webkit-backface-visibility:hidden;box-shadow:0 0 2px rgba(0,0,0,.1)}.\uD83D\uDCD6-page3d .\uD83D\uDCD6-page3d-front{transform:rotateY(0)}.\uD83D\uDCD6-page3d .\uD83D\uDCD6-page3d-back{transform:rotateY(-180deg)}");const Wt=Object.assign(qt,he);return Wt.View=b,Wt.Paper=u,Wt.Layout=k,Wt.Marks=C,Wt.version="v2.2.9",Wt}();
//# sourceMappingURL=bindery.min.js.map
